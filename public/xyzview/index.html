<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="/css/demo-styling.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" /> 
  <link rel="stylesheet" href="/css/custom.css"> 
  
  
  <title>Lab Initio | Molecular Visualizer</title>


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>




<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script src="https://3Dmol.csb.pitt.edu/build/3Dmol-min.js"></script>

</head>
<body><header class="site-header">
  <div class="container">
          <div class="logo">
        
        <a href="http://localhost:1313/">
          <img src="/images/TopBanner2.jpg" alt="AI-Driven Quantum Chemistry Banner" class="header-banner"> 
        </a> 
      </div>
  <nav class="main-nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/publications/">Publications</a></li>
    
      <li><a href="/platform/">AI</a></li>
    
      <li><a href="/awards/">Awards</a></li>
    
      <li><a href="/academic_profile/">Profile</a></li>
    
      <li><a href="/editor/">Editor</a></li>
    
      <li><a href="/explore/">Explore</a></li>
    
      <li><a href="/xyzview/">XYZ</a></li>
    
      <li><a href="/join/">Join</a></li>
    
      <li><a href="/bulletin/">Bulletin</a></li>
    
      <li><a href="/contact/">Contact</a></li>
    
  </ul>
</nav>
</div>
</header>

<div id="content">
  <div class="homepage-content"> 
    
    <hr> 
    <h3 id="visualize-xyz-coordinates">Visualize XYZ Coordinates</h3>
<p>Welcome to the Lab Initio Molecular Visualizer, a tool for students, educators, and computational chemists.</p>
<p>Paste your molecule&rsquo;s XYZ coordinates into the box below and click &ldquo;Visualize&rdquo;.</p>
<textarea id="xyz-input" rows="10" style="width: 100%; font-family: monospace; border: 4px solid #ccc; padding: 5px;"></textarea>
<p><button id="update-viewer-btn" style="padding: 10px 15px; margin-top: 10px; cursor: pointer;">Visualize</button>
<button id="toggle-labels-btn" style="padding: 10px 15px; margin-top: 10px; cursor: pointer;" disabled>Show Atom Numbers</button></p>
<hr style="margin: 20px 0;">
<div id="mol-viewer" style="height: 500px; width: 100%; position: relative; border: 4px solid #ccc;"></div>
<!-- This is the JavaScript that initializes and updates the viewer. -->
<script type="text/javascript">
  $(document).ready(function() {
    let element = $('#mol-viewer');
    let config = { backgroundColor: 'white' };
    let viewer = $3Dmol.createViewer(element, config);
    let labelsVisible = false;

    function loadMolecule(data) {
        viewer.clear();
        viewer.addModel(data, "xyz");
        viewer.setStyle({}, { stick: {} });
        viewer.zoomTo();
        viewer.render();
        viewer.zoom(1.2, 1000);
        labelsVisible = false;
        $('#toggle-labels-btn').text('Show Atom Numbers').prop('disabled', false);
    }

    // --- Initial molecule load ---
    let initial_molecule_url = '/molecules/capsaicin.xyz'; 
    jQuery.ajax(initial_molecule_url, {
      success: function(data) {
        $('#xyz-input').val(data);
        loadMolecule(data);
      },
      error: function(hdr, status, err) {
        console.error("Failed to load " + initial_molecule_url + ": " + err);
      },
    });

    // --- Click handler for the "Visualize" button ---
    $('#update-viewer-btn').on('click', function() {
      let xyz_data = $('#xyz-input').val();
      if (xyz_data.trim() === '') {
        alert('Please paste molecule data into the box before clicking Visualize.');
        return;
      }
      loadMolecule(xyz_data);
    });

    // --- DEFINITIVE WORKING Click handler ---
    $('#toggle-labels-btn').on('click', function() {
        if (labelsVisible) {
            // The most reliable way to remove labels is to redraw the molecule
            let current_data = $('#xyz-input').val();
            loadMolecule(current_data);
        } else {
            // Get the model and its atoms manually
            let model = viewer.getModel(0);
            if (model) {
                let atoms = model.selectedAtoms({}); // Get all atoms
                
                // Manually loop through each atom and add a label
                for (let i = 0; i < atoms.length; i++) {
                    let atom = atoms[i];
                    viewer.addLabel((atom.index + 1).toString(), { 
                        position: { x: atom.x, y: atom.y, z: atom.z },
                        fontColor: 'black',
                        backgroundColor: 'lightgray',
                        backgroundOpacity: 0.7
                    });
                }
            }
            viewer.render();
            $(this).text('Hide Atom Numbers');
            labelsVisible = true;
        }
    });
  });
</script>
 
  </div>

        </div><style>
     
    .footer-social-links a {
        color: #555;  
        transition: opacity 0.2s ease-in-out;  
    }
    .footer-social-links a:hover {
        opacity: 0.7;  
    }
     
    .twitter-icon {
        color: #1DA1F2;  
    }
</style>

<footer style="padding: 40px 20px; text-align: center; font-size: 0.9em; color: #555;">
    
    
    <div class="footer-social-links" style="margin-bottom: 20px; display: flex; justify-content: center; gap: 20px;">
        <a href="https://twitter.com/Lab_initio" title="Follow on Twitter" class="twitter-icon" target="_blank" rel="noopener noreferrer">
            
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
            </svg>
        </a>
        <a href="https://www.linkedin.com/in/amirkarton" title="Connect on LinkedIn" target="_blank" rel="noopener noreferrer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.325 0-1.936.724-2.26 1.284h.018V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
            </svg>
        </a>
    </div>

    <hr style="border: 0; border-top: 1px solid #eee; margin-bottom: 20px;">

    
    <div style="display: flex; justify-content: center; align-items: center; gap: 5px;">
        <img src="/images/labinitio-logo.svg" alt="Lab Initio Logo" style="height: 35px; width: auto;">
        <span>
            © 2013–2025 Lab Initio.
        </span>
    </div>

    
    <div style="margin-top: 15px; font-size: 0.9em;">
        Content on this site is licensed under a 
        <a href="http://creativecommons.org/licenses/by/4.0/" rel="license" style="text-decoration: underline; color: #555;">CC BY 4.0</a>.
    </div>
</footer>


        
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

        
        <script>
          var swiper = new Swiper('.hero-slideshow', {
            
            loop: true, 
            autoplay: { 
              delay: 5000, 
              disableOnInteraction: false, 
            },
            
            
            pagination: {
              el: '.swiper-pagination',
              clickable: true,
            },

            
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
          });
        </script>
        
    </body>
</html>
